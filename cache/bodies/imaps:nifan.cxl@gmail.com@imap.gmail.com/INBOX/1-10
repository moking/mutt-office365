Delivered-To: nifan.cxl@gmail.com
Received: by 2002:a98:af93:0:b0:1e2:ec61:e511 with SMTP id y19csp785716eil;
        Fri, 13 Oct 2023 01:02:25 -0700 (PDT)
X-Google-Smtp-Source: AGHT+IFdCNOJr1HCVFZxCeySqPGpPWLQmpKmPdpw8Jp8EKXv/VIDd5l3fx3Kzi4SeXNw9LXr/Z2k
X-Received: by 2002:a05:6808:152a:b0:3ad:f4cc:79a5 with SMTP id u42-20020a056808152a00b003adf4cc79a5mr34197977oiw.33.1697184144764;
        Fri, 13 Oct 2023 01:02:24 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1697184144; cv=none;
        d=google.com; s=arc-20160816;
        b=VjXl8v78kkY6QjizFEDD3Q/akrkWKZl1OybUoLGJ7c5O9m+iBzroqa1p0cRiTDoCGX
         tX/r28JCtM9c4dlFcfaY88HpdHpy8hzNJQBpftL/jWgOAUWi5mXEpOnVBqTrPVFktItD
         stEalwJBj29+999uY9pJSbntKIgFITX3GmJQdWzrx1kspEU2D7NlIuwaCPjlCoRjHNtJ
         jAX9/DWSPPE4zrzSxH3gf6SEx5RcGpGXjNlPWi95dSXDOAY3kdp7erOTxLv0HPP0kBex
         oCr+GRGXXIV2wk8xv5Ae6h7WIBSekZqOhbf5HT2kAWrmthufZtebpoCZD37t2YGBphQ2
         f1gA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=mime-version:content-transfer-encoding:content-language
         :accept-language:in-reply-to:references:message-id:date:thread-index
         :thread-topic:subject:to:from;
        bh=16rR1BKLm01mZcwrkyRMEgzuWjVbsmsSXss68qfOrec=;
        fh=M6IzToWNBqLVOK9zp4fFP/2GwLYohgAhyfvxyM89T8k=;
        b=NCci5U6q7IRYvgTrzu1CkQzwOAyC0pn/bias1mJQ3AAVLHqLvEJhYRXay8SkMPz8Od
         Jx6xxKe5n/FqmmX7W/WFnJCzu3BAHgTeZd+VhHHgNZIttCJ4fVutSxa4swTML9xZ26bL
         ISmgjbwc/G2CtumTg2fzm9z7XATTDzViNL7YFNDSIKphOT4AoDvh29RNaEd9XUkYt67X
         v4D8qQfifX28x52XoHTujeTNtyv+whO+0MJQwQRBlGNqlK5Z8deYtqo1TlK5c6J1OdPX
         Fq9aemkTA5vtP3EgPJ15gVL84ll18UHd8VfPVTFPZrPsgo4JJGEBAFxfqXmvDkge3/sR
         gezA==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: domain of jonathan.cameron@huawei.com designates 119.8.89.135 as permitted sender) smtp.mailfrom=jonathan.cameron@huawei.com;
       dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=huawei.com
Return-Path: <jonathan.cameron@huawei.com>
Received: from bramsgout01.huawei.com (bramsgout01.huawei.com. [119.8.89.135])
        by mx.google.com with ESMTPS id cp12-20020a056808358c00b003adb977ec07si1370897oib.144.2023.10.13.01.02.24
        for <nifan.cxl@gmail.com>
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Fri, 13 Oct 2023 01:02:24 -0700 (PDT)
Received-SPF: pass (google.com: domain of jonathan.cameron@huawei.com designates 119.8.89.135 as permitted sender) client-ip=119.8.89.135;
Authentication-Results: mx.google.com;
       spf=pass (google.com: domain of jonathan.cameron@huawei.com designates 119.8.89.135 as permitted sender) smtp.mailfrom=jonathan.cameron@huawei.com;
       dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=huawei.com
Received: from saopeml00100001.china.huawei.com (unknown [172.18.53.135])
	by bramsgout01.huawei.com (SkyGuard) with ESMTP id 4S6Jd54psgz9xGPC
	for <nifan.cxl@gmail.com>; Fri, 13 Oct 2023 15:52:25 +0800 (CST)
Received: from lhrpeml100003.china.huawei.com (7.191.160.210) by
 saopeml00100001.china.huawei.com (7.184.64.20) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.2507.31; Fri, 13 Oct 2023 05:02:18 -0300
Received: from lhrpeml500005.china.huawei.com (7.191.163.240) by
 lhrpeml100003.china.huawei.com (7.191.160.210) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.2507.31; Fri, 13 Oct 2023 09:02:13 +0100
Received: from lhrpeml500005.china.huawei.com ([7.191.163.240]) by
 lhrpeml500005.china.huawei.com ([7.191.163.240]) with mapi id 15.01.2507.031;
 Fri, 13 Oct 2023 09:02:13 +0100
From: Jonathan Cameron <jonathan.cameron@huawei.com>
To: "nifan.cxl@gmail.com" <nifan.cxl@gmail.com>, "fan.ni@samsung.com"
	<fan.ni@samsung.com>, "nifan@outlook.com" <nifan@outlook.com>
Subject: RE: [PATCH 1/1] hw/mem/cxl_type3: Add dpa range validation for
 accesses to dc regions
Thread-Topic: [PATCH 1/1] hw/mem/cxl_type3: Add dpa range validation for
 accesses to dc regions
Thread-Index: AQHZ/VHRnKr8QxHPIEuMoxgxaFHp9LBHXClg
Date: Fri, 13 Oct 2023 08:02:13 +0000
Message-ID: <c4380cbd290b4059a3f772266bb6841f@huawei.com>
References: <20231012211850.17833-1-nifan.cxl@gmail.com>
 <20231012211850.17833-2-nifan.cxl@gmail.com>
In-Reply-To: <20231012211850.17833-2-nifan.cxl@gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.126.172.163]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-CFilter-Loop: Reflected

SGkgRmFuLA0KDQpZb3UgbWFueSBhbHJlYWR5IGhhdmUgcmVzZW50IHRoaXMsIGJ1dCBpZiBub3Qg
bWFrZSBzdXJlICB0byBjYyBMaW51eC1jeGwuDQpBdm9pZHMgYW55IGVudGl0eSBsaXN0IG1lc3Mg
YnkgbWFraW5nIGl0ICdwdWJsaXNoZWQnLg0KDQpBbHNvLCBkcm9wIG15IHNpZ24gb2ZmIGZyb20g
YSBuZXcgdmVyc2lvbi4gICBJIGNhbiBjbGVhbiB0aGF0IHVwIGlmIG5vdC4gIFJpc2sgaXMgSSds
bCBhcHBseSBhIHJlcGVhdGVkIG9uZSDimLkNCg0KSm9uYXRoYW4NCg0KDQotLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KRnJvbTogbmlmYW4uY3hsQGdtYWlsLmNvbSA8bmlmYW4uY3hsQGdtYWls
LmNvbT4gDQpTZW50OiAxMiBPY3RvYmVyIDIwMjMgMjI6MTgNClRvOiBmYW4ubmlAc2Ftc3VuZy5j
b207IG5pZmFuQG91dGxvb2suY29tDQpDYzogSm9uYXRoYW4gQ2FtZXJvbiA8am9uYXRoYW4uY2Ft
ZXJvbkBodWF3ZWkuY29tPg0KU3ViamVjdDogW1BBVENIIDEvMV0gaHcvbWVtL2N4bF90eXBlMzog
QWRkIGRwYSByYW5nZSB2YWxpZGF0aW9uIGZvciBhY2Nlc3NlcyB0byBkYyByZWdpb25zDQoNCkZy
b206IEZhbiBOaSA8ZmFuLm5pQHNhbXN1bmcuY29tPg0KDQpOb3QgYWxsIGRwYSByYW5nZSBpbiB0
aGUgZGMgcmVnaW9ucyBpcyB2YWxpZCB0byBhY2Nlc3MgdW50aWwgYW4gZXh0ZW50IGNvdmVyaW5n
IHRoZSByYW5nZSBoYXMgYmVlbiBhZGRlZC4gQWRkIGEgYml0bWFwIGZvciBlYWNoIHJlZ2lvbiB0
byByZWNvcmQgd2hldGhlciBhIGRjIGJsb2NrIGluIHRoZSByZWdpb24gaGFzIGJlZW4gYmFja2Vk
IGJ5IGRjIGV4dGVudC4NCkZvciB0aGUgYml0bWFwLCBhIGJpdCBpbiB0aGUgYml0bWFwIHJlcHJl
c2VudHMgYSBkYyBibG9jay4gV2hlbiBhIGRjIGV4dGVudCBpcyBhZGRlZCwgYWxsIHRoZSBiaXRz
IG9mIHRoZSBibG9ja3MgaW4gdGhlIGV4dGVudCB3aWxsIGJlIHNldCwgd2hpY2ggd2lsbCBiZSBj
bGVhcmVkIHdoZW4gdGhlIGV4dGVudCBpcyByZWxlYXNlZC4NCg0KU2lnbmVkLW9mZi1ieTogRmFu
IE5pIDxmYW4ubmlAc2Ftc3VuZy5jb20+DQpMaW5rOiBodHRwczovL2xvcmUua2VybmVsLm9yZy9y
LzIwMjMwNzI1MTgzOTM5LjI3NDEwMjUtMTAtZmFuLm5pQHNhbXN1bmcuY29tDQpTaWduZWQtb2Zm
LWJ5OiBKb25hdGhhbiBDYW1lcm9uIDxKb25hdGhhbi5DYW1lcm9uQGh1YXdlaS5jb20+DQoNCi0t
DQpKQyBjaGFuZ2VzOg0KLSBSZWJhc2Ugb24gd2hhdCB3aWxsIGJlIG5leHQgZ2l0bGFiLmNvbS9q
aWMyMy9xZW11IENYTCBzdGFnaW5nIHRyZWUuDQotIERyb3AgdW5uZWNlc3NhcnkgaGFuZGxpbmcg
b2YgZmFpbGVkIGJpdG1hcCBhbGxvY2F0aW9ucy4gSW4gY29tbW9uIHdpdGgNCiAgbW9zdCBRRU1V
IGFsbG9jYXRpb25zIHRoZXkgZmFpbCBoYXJkIGFueXdheS4NCi0gVXNlIHByZXZpb3VzbHkgZmFj
dG9yZWQgb3V0IGN4bF9maW5kX3JlZ2lvbigpIGhlbHBlcg0KLSBNaW5vciBlZGl0b3JpYWwgc3R1
ZmYgaW4gY29tbWVudHMgc3VjaCBhcyBzcGVjIHZlcnNpb24gcmVmZXJlbmNlcw0KICBhY2NvcmRp
bmcgdG8gdGhlIHN0YW5kYXJkIGZvcm0gSSdtIHRyeWluZyB0byBwdXNoIHRocm91Z2ggdGhlIGNv
ZGUuDQpQaWNrZWQgdXAgSsO4cmdlbidzIGZpeDoNCmh0dHBzOi8vbG9yZS5rZXJuZWwub3JnL3Fl
bXUtZGV2ZWwvZDBkN2NhMWQtODFiYy0xOWIzLTQ5MDQtZDYwMDQ2ZGVkODQ0QHdkYy5jb20vVC8j
dQ0KLS0tDQogaHcvbWVtL2N4bF90eXBlMy5jICAgICAgICAgIHwgMTA0ICsrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKw0KIGluY2x1ZGUvaHcvY3hsL2N4bF9kZXZpY2UuaCB8ICAg
MSArDQogMiBmaWxlcyBjaGFuZ2VkLCAxMDUgaW5zZXJ0aW9ucygrKQ0KDQpkaWZmIC0tZ2l0IGEv
aHcvbWVtL2N4bF90eXBlMy5jIGIvaHcvbWVtL2N4bF90eXBlMy5jIGluZGV4IGEzYTVhYmM1NDUu
LjlkNzU4ODFhMzIgMTAwNjQ0DQotLS0gYS9ody9tZW0vY3hsX3R5cGUzLmMNCisrKyBiL2h3L21l
bS9jeGxfdHlwZTMuYw0KQEAgLTgxMCw2ICs4MTAsNyBAQCBzdGF0aWMgaW50IGN4bF9jcmVhdGVf
ZGNfcmVnaW9ucyhDWExUeXBlM0RldiAqY3QzZCkNCiAgICAgICAgIC8qIGRzbWFkX2hhbmRsZSBp
cyBzZXQgd2hlbiBjcmVhdGluZyBjZGF0IHRhYmxlIGVudHJpZXMgKi8NCiAgICAgICAgIHJlZ2lv
bi0+ZmxhZ3MgPSAwOw0KIA0KKyAgICAgICAgcmVnaW9uLT5ibGtfYml0bWFwID0gYml0bWFwX25l
dyhyZWdpb24tPmxlbiAvIA0KKyByZWdpb24tPmJsb2NrX3NpemUpOw0KICAgICAgICAgcmVnaW9u
X2Jhc2UgKz0gcmVnaW9uLT5sZW47DQogICAgIH0NCiAgICAgUVRBSUxRX0lOSVQoJmN0M2QtPmRj
LmV4dGVudHMpOw0KQEAgLTgxNyw2ICs4MTgsMTcgQEAgc3RhdGljIGludCBjeGxfY3JlYXRlX2Rj
X3JlZ2lvbnMoQ1hMVHlwZTNEZXYgKmN0M2QpDQogICAgIHJldHVybiAwOw0KIH0NCiANCitzdGF0
aWMgdm9pZCBjeGxfZGVzdHJveV9kY19yZWdpb25zKENYTFR5cGUzRGV2ICpjdDNkKSB7DQorICAg
IGludCBpOw0KKyAgICBzdHJ1Y3QgQ1hMRENEUmVnaW9uICpyZWdpb247DQorDQorICAgIGZvciAo
aSA9IDA7IGkgPCBjdDNkLT5kYy5udW1fcmVnaW9uczsgaSsrKSB7DQorICAgICAgICByZWdpb24g
PSAmY3QzZC0+ZGMucmVnaW9uc1tpXTsNCisgICAgICAgIGdfZnJlZShyZWdpb24tPmJsa19iaXRt
YXApOw0KKyAgICB9DQorfQ0KKw0KIHN0YXRpYyBib29sIGN4bF9zZXR1cF9tZW1vcnkoQ1hMVHlw
ZTNEZXYgKmN0M2QsIEVycm9yICoqZXJycCkgIHsNCiAgICAgRGV2aWNlU3RhdGUgKmRzID0gREVW
SUNFKGN0M2QpOw0KQEAgLTEwNDUsNiArMTA1Nyw3IEBAIGVycl9mcmVlX3NwZWNpYWxfb3BzOg0K
ICAgICBnX2ZyZWUocmVncy0+c3BlY2lhbF9vcHMpOw0KIGVycl9hZGRyZXNzX3NwYWNlX2ZyZWU6
DQogICAgIGlmIChjdDNkLT5kYy5ob3N0X2RjKSB7DQorICAgICAgICBjeGxfZGVzdHJveV9kY19y
ZWdpb25zKGN0M2QpOw0KICAgICAgICAgYWRkcmVzc19zcGFjZV9kZXN0cm95KCZjdDNkLT5kYy5o
b3N0X2RjX2FzKTsNCiAgICAgfQ0KICAgICBpZiAoY3QzZC0+aG9zdHBtZW0pIHsNCkBAIC0xMDY3
LDYgKzEwODAsNyBAQCBzdGF0aWMgdm9pZCBjdDNfZXhpdChQQ0lEZXZpY2UgKnBjaV9kZXYpDQog
ICAgIHNwZG1fc29ja19maW5pKGN0M2QtPmRvZV9zcGRtLnNvY2tldCk7DQogICAgIGdfZnJlZShy
ZWdzLT5zcGVjaWFsX29wcyk7DQogICAgIGlmIChjdDNkLT5kYy5ob3N0X2RjKSB7DQorICAgICAg
ICBjeGxfZGVzdHJveV9kY19yZWdpb25zKGN0M2QpOw0KICAgICAgICAgYWRkcmVzc19zcGFjZV9k
ZXN0cm95KCZjdDNkLT5kYy5ob3N0X2RjX2FzKTsNCiAgICAgfQ0KICAgICBpZiAoY3QzZC0+aG9z
dHBtZW0pIHsNCkBAIC0xMDc3LDYgKzEwOTEsNjYgQEAgc3RhdGljIHZvaWQgY3QzX2V4aXQoUENJ
RGV2aWNlICpwY2lfZGV2KQ0KICAgICB9DQogfQ0KIA0KKy8qDQorICogTWFyayB0aGUgRFBBIHJh
bmdlIFtkcGEsIGRhcCArIGxlbikgdG8gYmUgYmFja2VkIGFuZCBhY2Nlc3NpYmxlLiANCitUaGlz
DQorICogaGFwcGVucyB3aGVuIGEgREMgZXh0ZW50IGlzIGFkZGVkIGFuZCBhY2NlcHRlZCBieSB0
aGUgaG9zdC4NCisgKi8NCitzdGF0aWMgdm9pZCBjdDNfc2V0X3JlZ2lvbl9ibG9ja19iYWNrZWQo
Q1hMVHlwZTNEZXYgKmN0M2QsIHVpbnQ2NF90IGRwYSwNCisgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGxlbikgew0KKyAgICBDWExEQ0RSZWdpb24gKnJl
Z2lvbjsNCisNCisgICAgcmVnaW9uID0gY3hsX2ZpbmRfZGNfcmVnaW9uKGN0M2QsIGRwYSwgbGVu
KTsNCisgICAgaWYgKCFyZWdpb24pIHsNCisgICAgICAgIHJldHVybjsNCisgICAgfQ0KKw0KKyAg
ICBiaXRtYXBfc2V0KHJlZ2lvbi0+YmxrX2JpdG1hcCwgKGRwYSAtIHJlZ2lvbi0+YmFzZSkgLyBy
ZWdpb24tPmJsb2NrX3NpemUsDQorICAgICAgICAgICAgICAgbGVuIC8gcmVnaW9uLT5ibG9ja19z
aXplKTsgfQ0KKw0KKy8qDQorICogQ2hlY2sgd2hldGhlciBhIERQQSByYW5nZSBbZHBhLCBkcGEg
KyBsZW4pIGhhcyBiZWVuIGJhY2tlZCB3aXRoIERDIGV4dGVudHMuDQorICogVXNlZCB3aGVuIHZh
bGlkYXRpbmcgcmVhZC93cml0ZSB0byBkYyByZWdpb25zICAqLyBzdGF0aWMgYm9vbCANCitjdDNf
dGVzdF9yZWdpb25fYmxvY2tfYmFja2VkKENYTFR5cGUzRGV2ICpjdDNkLCB1aW50NjRfdCBkcGEs
DQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRfdCBsZW4p
IHsNCisgICAgQ1hMRENEUmVnaW9uICpyZWdpb247DQorICAgIHVpbnQ2NF90IG5iaXRzOw0KKyAg
ICBsb25nIG5yOw0KKw0KKyAgICByZWdpb24gPSBjeGxfZmluZF9kY19yZWdpb24oY3QzZCwgZHBh
LCBsZW4pOw0KKyAgICBpZiAoIXJlZ2lvbikgew0KKyAgICAgICAgcmV0dXJuIGZhbHNlOw0KKyAg
ICB9DQorDQorICAgIG5yID0gKGRwYSAtIHJlZ2lvbi0+YmFzZSkgLyByZWdpb24tPmJsb2NrX3Np
emU7DQorICAgIG5iaXRzID0gRElWX1JPVU5EX1VQKGxlbiwgcmVnaW9uLT5ibG9ja19zaXplKTsN
CisgICAgcmV0dXJuIGZpbmRfbmV4dF96ZXJvX2JpdChyZWdpb24tPmJsa19iaXRtYXAsIG5yICsg
bmJpdHMsIG5yKSA9PSBuciANCisrIG5iaXRzOyB9DQorDQorLyoNCisgKiBNYXJrIHRoZSBEUEEg
cmFuZ2UgW2RwYSwgZGFwICsgbGVuKSB0byBiZSB1bmJhY2tlZCBhbmQgaW5hY2Nlc3NpYmxlLiAN
CitUaGlzDQorICogaGFwcGVucyB3aGVuIGEgZGMgZXh0ZW50IGlzIHJldHVybiBieSB0aGUgaG9z
dC4NCisgKi8NCitzdGF0aWMgdm9pZCBjdDNfY2xlYXJfcmVnaW9uX2Jsb2NrX2JhY2tlZChDWExU
eXBlM0RldiAqY3QzZCwgdWludDY0X3QgZHBhLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVpbnQ2NF90IGxlbikgew0KKyAgICBDWExEQ0RSZWdpb24gKnJlZ2lv
bjsNCisgICAgdWludDY0X3QgbmJpdHM7DQorICAgIGxvbmcgbnI7DQorDQorICAgIHJlZ2lvbiA9
IGN4bF9maW5kX2RjX3JlZ2lvbihjdDNkLCBkcGEsIGxlbik7DQorICAgIGlmICghcmVnaW9uKSB7
DQorICAgICAgICByZXR1cm47DQorICAgIH0NCisNCisgICAgbnIgPSAoZHBhIC0gcmVnaW9uLT5i
YXNlKSAvIHJlZ2lvbi0+YmxvY2tfc2l6ZTsNCisgICAgbmJpdHMgPSBsZW4gLyByZWdpb24tPmJs
b2NrX3NpemU7DQorICAgIGJpdG1hcF9jbGVhcihyZWdpb24tPmJsa19iaXRtYXAsIG5yLCBuYml0
cyk7IH0NCisNCiBzdGF0aWMgYm9vbCBjeGxfdHlwZTNfZHBhKENYTFR5cGUzRGV2ICpjdDNkLCBo
d2FkZHIgaG9zdF9hZGRyLCB1aW50NjRfdCAqZHBhKSAgew0KICAgICBpbnQgaGRtX2luYyA9IFJf
Q1hMX0hETV9ERUNPREVSMV9CQVNFX0xPIC0gUl9DWExfSERNX0RFQ09ERVIwX0JBU0VfTE87IEBA
IC0xMTc4LDYgKzEyNTIsMTAgQEAgc3RhdGljIGludCBjeGxfdHlwZTNfaHBhX3RvX2FzX2FuZF9k
cGEoQ1hMVHlwZTNEZXYgKmN0M2QsDQogICAgICAgICAqYXMgPSAmY3QzZC0+aG9zdHBtZW1fYXM7
DQogICAgICAgICAqZHBhX29mZnNldCAtPSB2bXJfc2l6ZTsNCiAgICAgfSBlbHNlIHsNCisgICAg
ICAgIGlmICghY3QzX3Rlc3RfcmVnaW9uX2Jsb2NrX2JhY2tlZChjdDNkLCAqZHBhX29mZnNldCwg
c2l6ZSkpIHsNCisgICAgICAgICAgICByZXR1cm4gLUVOT0RFVjsNCisgICAgICAgIH0NCisNCiAg
ICAgICAgICphcyA9ICZjdDNkLT5kYy5ob3N0X2RjX2FzOw0KICAgICAgICAgKmRwYV9vZmZzZXQg
LT0gKHZtcl9zaXplICsgcG1yX3NpemUpOw0KICAgICB9DQpAQCAtMTk5Miw2ICsyMDcwLDMyIEBA
IHN0YXRpYyB2b2lkIHFtcF9jeGxfcHJvY2Vzc19keW5hbWljX2NhcGFjaXR5KGNvbnN0IGNoYXIg
KnBhdGgsIEN4bEV2ZW50TG9nIGxvZywNCiAgICAgICAgICAgICBjeGxfZXZlbnRfaXJxX2Fzc2Vy
dChkY2QpOw0KICAgICAgICAgfQ0KICAgICB9DQorDQorICAgIC8qDQorICAgICAqIFRPRE86IFNo
b3VsZCBvbmx5IHVwZGF0ZSB0aGUgYml0bWFwcyBhZnRlciBob3N0IGhhcyBhY2NlcHRlZCB0aGUN
CisgICAgICogY2hhbmdlIChleGNlcHQgZm9yIGZvcmNlZCByZW1vdmFsKS4gSXQgd2lsbCBiZSBu
ZWNlc3NhcnkgdG8NCisgICAgICogdHJhY2sgb2ZmZXJlZCBidXQgbm90IGFjY2VwdGVkIGNoYW5n
ZXMuIFBlcmhhcHMgYSBzaGFkb3cgYml0bWFwDQorICAgICAqIHdpbGwgYmUgbmVlZGVkIGZvciB0
aGlzLg0KKyAgICAgKi8NCisgICAgbGlzdCA9IHJlY29yZHM7DQorICAgIHdoaWxlIChsaXN0KSB7
DQorICAgICAgICBkcGEgPSBsaXN0LT52YWx1ZS0+ZHBhICogTWlCOw0KKyAgICAgICAgbGVuID0g
bGlzdC0+dmFsdWUtPmxlbiAqIE1pQjsNCisgICAgICAgIHJpZCA9IGxpc3QtPnZhbHVlLT5yZWdp
b25faWQ7DQorDQorICAgICAgICBzd2l0Y2ggKHR5cGUpIHsNCisgICAgICAgIGNhc2UgRENfRVZF
TlRfQUREX0NBUEFDSVRZOg0KKyAgICAgICAgICAgIGN0M19zZXRfcmVnaW9uX2Jsb2NrX2JhY2tl
ZChkY2QsIGRwYSwgbGVuKTsNCisgICAgICAgICAgICBicmVhazsNCisgICAgICAgIGNhc2UgRENf
RVZFTlRfUkVMRUFTRV9DQVBBQ0lUWToNCisgICAgICAgICAgICBjdDNfY2xlYXJfcmVnaW9uX2Js
b2NrX2JhY2tlZChkY2QsIGRwYSwgbGVuKTsNCisgICAgICAgICAgICBicmVhazsNCisgICAgICAg
IGRlZmF1bHQ6DQorICAgICAgICAgICAgZXJyb3Jfc2V0ZyhlcnJwLCAiREMgZXZlbnQgdHlwZSBu
b3QgaGFuZGxlZCB5ZXQiKTsNCisgICAgICAgICAgICBicmVhazsNCisgICAgICAgIH0NCisgICAg
ICAgIGxpc3QgPSBsaXN0LT5uZXh0Ow0KKyAgICB9DQogfQ0KIA0KIHZvaWQgcW1wX2N4bF9hZGRf
ZHluYW1pY19jYXBhY2l0eShjb25zdCBjaGFyICpwYXRoLCBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9o
dy9jeGwvY3hsX2RldmljZS5oIGIvaW5jbHVkZS9ody9jeGwvY3hsX2RldmljZS5oIGluZGV4IGVi
ODRlM2ZmMzguLmZkOTRlOWI1OWEgMTAwNjQ0DQotLS0gYS9pbmNsdWRlL2h3L2N4bC9jeGxfZGV2
aWNlLmgNCisrKyBiL2luY2x1ZGUvaHcvY3hsL2N4bF9kZXZpY2UuaA0KQEAgLTQ0Nyw2ICs0NDcs
NyBAQCB0eXBlZGVmIHN0cnVjdCBDWExEQ0RSZWdpb24gew0KICAgICB1aW50NjRfdCBibG9ja19z
aXplOw0KICAgICB1aW50MzJfdCBkc21hZGhhbmRsZTsNCiAgICAgdWludDhfdCBmbGFnczsNCisg
ICAgdW5zaWduZWQgbG9uZyAqYmxrX2JpdG1hcDsNCiB9IENYTERDRFJlZ2lvbjsNCiANCiBzdHJ1
Y3QgQ1hMVHlwZTNEZXYgew0KLS0NCjIuNDIuMA0KDQoNCg==
